<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://www.plcopen.org/xml/tc6_0200">
  <fileHeader companyName="Beckhoff Automation GmbH" productName="TwinCAT PLC Control" productVersion="3.5.13.21" creationDateTime="2022-06-05T16:15:56.4832631" />
  <contentHeader name="main" modificationDateTime="2022-06-05T16:15:56.4852631">
    <coordinateInfo>
      <fbd>
        <scaling x="1" y="1" />
      </fbd>
      <ld>
        <scaling x="1" y="1" />
      </ld>
      <sfc>
        <scaling x="1" y="1" />
      </sfc>
    </coordinateInfo>
    <addData>
      <data name="http://www.3s-software.com/plcopenxml/projectinformation" handleUnknown="implementation">
        <ProjectInformation />
      </data>
    </addData>
  </contentHeader>
  <types>
    <dataTypes />
    <pous>
      <pou name="MAIN" pouType="program">
        <interface>
          <localVars>
            <variable name="ModuleSeperationSensors" address="%I*">
              <type>
                <BYTE />
              </type>
              <initialValue>
                <simpleValue value="0" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> 0000_0dmu</xhtml>
              </documentation>
            </variable>
            <variable name="ModuleSeperationActuators" address="%Q*">
              <type>
                <BYTE />
              </type>
              <initialValue>
                <simpleValue value="0" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> 0000_00rc</xhtml>
              </documentation>
            </variable>
            <variable name="sensUp">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="sensMiddle">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="sensDown">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="sigCreate">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="sigRemove">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="actUpOpen">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="actUpClose">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="actDownOpen">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="actDownClose">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="moduleSeperation">
              <type>
                <derived name="FB_Separator" />
              </type>
            </variable>
            <variable name="seperationEnable">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="seperationExecute">
              <type>
                <BOOL />
              </type>
            </variable>
          </localVars>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">// Converting Inputs
sensUp := BYTE_TO_BOOL(ModuleSeperationSensors AND 2#0000_0001);
sensMiddle := BYTE_TO_BOOL(ModuleSeperationSensors AND 2#0000_0010);
sensDown := BYTE_TO_BOOL(ModuleSeperationSensors AND 2#0000_0100);


// Instance calls
moduleSeperation(
	bEnable:= seperationEnable, 
	bExecute:= seperationExecute, 
	bErrorReset:= , 
	bSensor1:= sensDown, 
	bSensor2:= sensMiddle, 
	bSensor3:= sensUp, 
	bR1AKT1=&gt; actUpClose, 
	bR2AKT1=&gt; actUpOpen, 
	bR1AKT2=&gt; actDownOpen, 
	bR2AKT2=&gt; actDownClose, 
	bNoBottle=&gt; , bWrongBottle=&gt; , eStatus=&gt; );


// Converting Outputs
ModuleSeperationActuators := 0;
ModuleSeperationActuators := BOOL_TO_BYTE(sigCreate) OR ModuleSeperationActuators;
ModuleSeperationActuators := SHL(BOOL_TO_BYTE(sigRemove),1) OR ModuleSeperationActuators;

ModuleSeperationActuators := SHL(BOOL_TO_BYTE(actUpOpen),7) OR ModuleSeperationActuators;
ModuleSeperationActuators := SHL(BOOL_TO_BYTE(actUpClose),6) OR ModuleSeperationActuators;
ModuleSeperationActuators := SHL(BOOL_TO_BYTE(actDownOpen),5) OR ModuleSeperationActuators;
ModuleSeperationActuators := SHL(BOOL_TO_BYTE(actDownClose),4) OR ModuleSeperationActuators;
</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
            <InterfaceAsPlainText>
              <xhtml xmlns="http://www.w3.org/1999/xhtml">PROGRAM MAIN
VAR
	ModuleSeperationSensors 		AT%I*		: BYTE := 0;			// 0000_0dmu
	ModuleSeperationActuators		AT%Q*		: BYTE := 0;			// 0000_00rc
	
	sensUp, sensMiddle, sensDown				: BOOL;
	
	sigCreate, sigRemove				: BOOL;
	actUpOpen, actUpClose				: BOOL;
	actDownOpen, actDownClose 			: BOOL;
	
	moduleSeperation		: FB_Separator;
	seperationEnable, seperationExecute	: BOOL;
END_VAR
</xhtml>
            </InterfaceAsPlainText>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>141fae0c-c78f-4672-9a75-26682aa93051</ObjectId>
          </data>
        </addData>
      </pou>
    </pous>
  </types>
  <instances>
    <configurations />
  </instances>
  <addData>
    <data name="http://www.3s-software.com/plcopenxml/projectstructure" handleUnknown="discard">
      <ProjectStructure>
        <Object Name="MAIN" ObjectId="141fae0c-c78f-4672-9a75-26682aa93051" />
      </ProjectStructure>
    </data>
  </addData>
</project>